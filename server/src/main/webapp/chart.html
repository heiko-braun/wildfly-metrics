<html>
<head>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/metrics-graphics/2.5.0/metricsgraphics.min.css"
          rel="stylesheet" type="text/css"/>

    <script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.0/d3.min.js' charset='utf-8'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/metrics-graphics/2.5.0/metricsgraphics.min.js"></script>


</head>
<body>

<div class='row main-windows'>
    <div class='data col-xs-2'>
        <textarea rows="20" cols="60">
            [{"ms":1435350528083,"val":213},
            {"ms":1435350528137,"val":256},
            {"ms":1435350529214,"val":160},
            {"ms":1435350529430,"val":120},
            {"ms":1435350529606,"val":400},
            {"ms":1435350529775,"val":350},
            {"ms":1435350529895,"val":256},
            {"ms":1435350530063,"val":270}
            ]
        </textarea>
    </div>
    <div class='js col-xs-5' id='editor'></div>
    <div class='result text-center col-xs-5'></div>
</div>

<script type="text/javascript">

    /* samples = JSON.parse($('.data textarea').val());
     samples.forEach(function(d) { d.ms = new Date(d.ms); });

     MG.data_graphic({
     title: "JVM Heap",
     description: "Heap usage in mb",
     data: samples,
     width: 400,
     height: 250,
     target: ".result",
     x_accessor: "ms",
     y_accessor: "val",
     interpolate: "linear"
     });*/

    d3.json('http://localhost:4444/api/get?metric=heap',
            function(data) {
                data.forEach(function(d) { d.ms = new Date(d.ms); });
                MG.data_graphic({
                    title: "JVM Heap",
                    description: "Heap usage in mb",
                    data: data,
                    width: 400,
                    height: 250,
                    error: 'This data is blocked by Lorem Ipsum. Get your **** together, Ipsum.',
                    missing_text: 'This is an example of a missing chart',
                    target: ".result",
                    x_accessor: "ms",
                    y_accessor: "val",
                    interpolate: "linear"
                });
            }
    );

</script>
</body>
<html>